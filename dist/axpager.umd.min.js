!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).axpager={})}(this,(function(t){"use strict";var e={JSON:"application/json",URL_ENCODED:"application/x-www-form-urlencoded",FORM_DATA:"multipart/form-data"},n=function(){function t(){}return t.prototype.request=function(t,n,a){var s=this;return new Promise((function(i,r){s.xhr&&4!==s.xhr.readyState&&s.xhr.abort(),s.xhr=new XMLHttpRequest,s.xhr.responseType="json",Object.keys(a.headers).forEach((function(t){s.xhr.setRequestHeader(t,a.headers[t])})),a.before(s.xhr),s.xhr.onload=function(){4===this.readyState&&this.status>=200&&this.status<300?i(this.response):r(this.status+": "+(this.statusText||"request failed."))},a.timeout&&a.timeout>=0&&(s.xhr.timeout=a.timeout,s.xhr.ontimeout=function(){r("408: request timeout, request wait time > "+this.timeout)}),s.xhr.onerror=function(){r(this.status+": "+(this.statusText||"server error."))};var o=(a.method||"GET").toUpperCase();if("GET"===o){var c=Object.assign({},a.data,n),h=t.includes("?")?"&":"?",u=t+h+new URLSearchParams(c);return s.xhr.open(o,u,!0),void s.xhr.send()}if("POST"===o){if(s.xhr.open(o,t,!0),a.data instanceof FormData){var l=new FormData;return a.data.forEach((function(t,e){return l.set(e,t)})),Object.keys(n).forEach((function(t){return l.set(t,n[t])})),void s.xhr.send(l)}var g=a.headers["Content-Type"]||e.URL_ENCODED;if(g===e.FORM_DATA){var p=new FormData;return Object.keys(a.data).forEach((function(t){return p.set(t,a.data[t])})),Object.keys(n).forEach((function(t){return p.set(t,n[t])})),void s.xhr.send(p)}c=Object.assign({},a.data,n);if(g===e.URL_ENCODED)return void s.xhr.send(new URLSearchParams(c));if(g===e.JSON)return void s.xhr.send(JSON.stringify(c));s.xhr.abort(),r("Not support Content-Type: "+g)}r("Not support "+o+" method.")}))},t}(),a={itemsPerPageLabel:"每页条数",firstPageLabel:"第一页",previousPageLabel:"上一页",nextPageLabel:"下一页",lastPageLabel:"最后一页",hidePageSize:!1,showFirstLastButtons:!0,showPageSizeOptions:!0,pageSizeOptions:[10,15,30],ajaxAdapter:new n,getRangeLabel:function(t,e,n,a){return"第".concat(t,"/").concat(n,"页，共").concat(a,"条")},getPageParams:function(t,e){return{page:t,size:e}},getPagedResource:function(t){return{data:t.data,length:t.pager.recordCount}},changes:function(t,e){}},s={method:"GET",data:{},headers:{},timeout:-1,before:function(t){},success:function(t,e,n){},error:function(t){},finish:function(){},filter:function(t,e){return!0}},i='<svg viewBox="0 0 24 24" focusable="false" class="rbt-icon"><path d="M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"></path></svg>',r='<svg viewBox="0 0 24 24" focusable="false" class="rbt-icon"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></svg>',o='<svg viewBox="0 0 24 24" focusable="false" class="rbt-icon"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg>',c='<svg viewBox="0 0 24 24" focusable="false" class="rbt-icon"><path d="M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"></path></svg>',h=function(t,e){void 0===e&&(e={});var n=document.createElement(t);return Object.keys(e).forEach((function(t){n[t]=e[t]})),n},u=Symbol("initDomElements"),l=Symbol("updateActionStatus"),g=Symbol("updateRangeLabel"),p=Symbol("updateCurrentPage"),f=function(){function t(t,e){var n=this;this.config={},this.previousPage=1,this.currentPage=1,this.length=0,this.size=0,this.container=t,this.config=Object.assign({},a,e),this.size=this.config.pageSizeOptions[0]||10,this.actions={selectPageSize:h("SELECT",{className:"rbt-select rbt-size-options",disabled:!0}),btnFirst:h("BUTTON",{type:"button",title:this.config.firstPageLabel,innerHTML:"".concat(i,'<span class="rbt-btn-touch-target"></span>'),className:"rbt-btn",disabled:!0}),btnPrev:h("BUTTON",{type:"button",title:this.config.previousPageLabel,innerHTML:"".concat(r,'<span class="rbt-btn-touch-target"></span>'),className:"rbt-btn",disabled:!0}),btnNext:h("BUTTON",{type:"button",title:this.config.nextPageLabel,innerHTML:"".concat(o,'<span class="rbt-btn-touch-target"></span>'),className:"rbt-btn",disabled:!0}),btnLast:h("BUTTON",{type:"button",title:this.config.lastPageLabel,innerHTML:"".concat(c,'<span class="rbt-btn-touch-target"></span>'),className:"rbt-btn",disabled:!0})},this.labels={itemsPerPageLabel:h("SPAN",{className:"rbt-label rbt-items-per-page"}),rangeLabel:h("SPAN",{className:"rbt-label rbt-range"})},this.panels={pageSizePanel:h("DIV",{className:"rbt-page-size"}),actionsPanel:h("DIV",{className:"rbt-range-actions"})},this.panels.actionsPanel.addEventListener("click",(function(t){var e=t.target;if(null!=e&&("rbt-btn-touch-target"===e.className&&(e=e.parentElement),null!=e&&!e.disabled)){var a=n.actions,s=!0;switch(n.previousPage=n.currentPage,e){case a.btnFirst:n.currentPage=1;break;case a.btnPrev:n.currentPage=n.currentPage>1?n.currentPage-1:1;break;case a.btnNext:var i=n.currentPage+1,r=n.pages;n.currentPage=i>r?r:i;break;case a.btnLast:n.currentPage=n.pages;break;default:s=!1}s&&(n.config.changes(n.pageEvent,e),n.of(n.target,n.option))}})),this.actions.selectPageSize.addEventListener("change",(function(t){n.previousPage=n.currentPage,n.size=+t.target.value||10;var e=n.pages;n.currentPage>e&&(n.currentPage=e),n.config.changes(n.pageEvent,t.target),n.of(n.target,n.option)})),this[u]()}return Object.defineProperty(t.prototype,"pages",{get:function(){if(this.length<=1)return 1;var t=this.length/this.size;if(t<=1)return 1;var e=Math.floor(t);return e===t?e:e+1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageParams",{get:function(){return this.config.getPageParams(this.currentPage,this.size)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageEvent",{get:function(){var t=this.currentPage*this.size;return{previousPage:this.previousPage,page:this.currentPage,size:this.size,start:(this.currentPage-1)*this.size,end:t>this.length?this.length:t,pages:this.pages,length:this.length}},enumerable:!1,configurable:!0}),t.init=function(e,n){return new t(e,n)},t.prototype.ajax=function(t,e){var n=this;if("string"!=typeof t)throw Error("Request url is required.");this.target=t,this.option=Object.assign({},s,e);var a={method:this.option.method,data:this.option.data,headers:this.option.headers,timeout:this.option.timeout,before:this.option.before};this.config.ajaxAdapter.request(this.target,this.pageParams,a).then((function(t){var e=n.config.getPagedResource(t),a=e.data,s=e.length;n[p](s);var i=n.pageEvent;n.option.success(a,i,n.option.data),n[l](i.page,i.pages,i.length),n[g]()})).catch(this.option.error).finally(this.option.finish)},t.prototype.resource=function(t,e){var n=this;if(!(t instanceof Array))throw Error("data must be an Array.");this.target=t,this.option=Object.assign({},s,e),this.option.before(null);var a=this.target.filter((function(t){return n.option.filter(t,n.option.data)}));this[p](a.length);var i=this.pageEvent,r=a.slice(i.start,i.end);this.option.success(r,i,this.option.data),this[l](i.page,i.pages,i.length),this[g](),this.option.finish()},t.prototype.of=function(t,e){if("string"!=typeof t){if(!(t instanceof Array))throw Error(t+" can not be paging.");this.resource(t,e)}else this.ajax(t,e)},t.prototype.refresh=function(){this.of(this.target,this.option)},t.prototype[p]=function(t){this.length=t;var e=this.pages;this.currentPage=this.currentPage>e?e:this.currentPage},t.prototype[u]=function(){var t=this;this.container.innerHTML='<div class="rabbit-pager"></div>',this.actions.selectPageSize.innerHTML=this.config.pageSizeOptions.map((function(t){return'<option value="'.concat(t,'">').concat(t,"</option>")})).join(""),this.labels.itemsPerPageLabel.innerHTML=this.config.itemsPerPageLabel+(this.config.showPageSizeOptions?"":this.config.pageSizeOptions[0]||10),[this.labels.itemsPerPageLabel,this.config.showPageSizeOptions?this.actions.selectPageSize:null].filter((function(t){return null!==t})).forEach((function(e){return t.panels.pageSizePanel.appendChild(e)})),[this.labels.rangeLabel,this.config.showFirstLastButtons?this.actions.btnFirst:null,this.actions.btnPrev,this.actions.btnNext,this.config.showFirstLastButtons?this.actions.btnLast:null].filter((function(t){return null!==t})).forEach((function(e){return t.panels.actionsPanel.appendChild(e)})),[this.config.hidePageSize?null:this.panels.pageSizePanel,this.panels.actionsPanel].filter((function(t){return null!==t})).forEach((function(e){return t.container.firstElementChild.appendChild(e)}))},t.prototype[g]=function(){this.labels.rangeLabel.innerHTML=this.config.getRangeLabel(this.currentPage,this.size,this.pages,this.length)},t.prototype[l]=function(t,e,n){var a=t<=1,s=e<=1||t===e,i="rbt-btn".concat(a?"":" rbt-ripple-btn"),r="rbt-btn".concat(s?"":" rbt-ripple-btn");this.actions.selectPageSize.disabled=n<=0,this.actions.btnFirst.disabled=a,this.actions.btnFirst.className=i,this.actions.btnPrev.disabled=a,this.actions.btnPrev.className=i,this.actions.btnNext.disabled=s,this.actions.btnNext.className=r,this.actions.btnLast.disabled=s,this.actions.btnLast.className=r},t}(),b=function(){function t(){}return t.prototype.request=function(t,n,a){return new Promise((function(s,i){var r=(a.method||"GET").toUpperCase(),o=t,c={method:a.method,headers:a.headers};if("GET"===r){var h=Object.assign({},a.data,n);o=o+(t.includes("?")?"&":"?")+new URLSearchParams(h)}else if("POST"===r)if(a.data instanceof FormData){var u=new FormData;a.data.forEach((function(t,e){return u.set(e,t)})),Object.keys(n).forEach((function(t){return u.set(t,n[t])})),c.body=u}else{var l=a.headers["Content-Type"]||e.URL_ENCODED;if(l===e.FORM_DATA){var g=new FormData;Object.keys(a.data).forEach((function(t){return g.set(t,a.data[t])})),Object.keys(n).forEach((function(t){return g.set(t,n[t])})),c.body=g}else{h=Object.assign({},a.data,n);l===e.URL_ENCODED?c.body=new URLSearchParams(h):l===e.JSON&&(c.body=JSON.stringify(h))}}a.before(c),fetch(o,c).then((function(t){t.ok?t.json().then(s):i(t.status+": "+(t.statusText||"request failed."))})).catch(i)}))},t}(),d=f.init;t.ContentType=e,t.FetchAdapter=b,t.Paginator=f,t.XMLHttpRequestAdapter=n,t.createElement=h,t.init=d}));
//# sourceMappingURL=axpager.umd.min.js.map

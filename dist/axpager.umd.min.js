!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).axpager={})}(this,(function(t){"use strict";var e={JSON:"application/json",URL_ENCODED:"application/x-www-form-urlencoded",FORM_DATA:"multipart/form-data"},a=function(){function t(){}return t.prototype.request=function(t,a,n){var s=this;return new Promise((function(i,r){s.xhr&&4!==s.xhr.readyState&&s.xhr.abort(),s.xhr=new XMLHttpRequest,s.xhr.responseType="json",Object.keys(n.headers).forEach((function(t){s.xhr.setRequestHeader(t,n.headers[t])})),n.before(s.xhr),s.xhr.onload=function(){4===this.readyState&&this.status>=200&&this.status<300?i(this.response):r(this.status+": "+(this.statusText||"request failed."))},n.timeout&&n.timeout>=0&&(s.xhr.timeout=n.timeout,s.xhr.ontimeout=function(){r("408: request timeout, request wait time > "+this.timeout)}),s.xhr.onerror=function(){r(this.status+": "+(this.statusText||"server error."))};var o=(n.method||"GET").toUpperCase();if("GET"===o){var c=Object.assign({},n.data,a),h=t.includes("?")?"&":"?",u=t+h+new URLSearchParams(c);return s.xhr.open(o,u,!0),void s.xhr.send()}if("POST"===o){if(s.xhr.open(o,t,!0),n.data instanceof FormData){var l=new FormData;return n.data.forEach((function(t,e){return l.set(e,t)})),Object.keys(a).forEach((function(t){return l.set(t,a[t])})),void s.xhr.send(l)}var g=n.headers["Content-Type"]||e.URL_ENCODED;if(g===e.FORM_DATA){var p=new FormData;return Object.keys(n.data).forEach((function(t){return p.set(t,n.data[t])})),Object.keys(a).forEach((function(t){return p.set(t,a[t])})),void s.xhr.send(p)}c=Object.assign({},n.data,a);if(g===e.URL_ENCODED)return void s.xhr.send(new URLSearchParams(c));if(g===e.JSON)return void s.xhr.send(JSON.stringify(c));s.xhr.abort(),r("Not support Content-Type: "+g)}r("Not support "+o+" method.")}))},t}(),n={itemsPerPageLabel:"每页条数",firstPageLabel:"第一页",previousPageLabel:"上一页",nextPageLabel:"下一页",lastPageLabel:"最后一页",hidePageSize:!1,showFirstLastButtons:!0,showPageSizeOptions:!0,pageSizeOptions:[10,15,30],ajaxAdapter:new a,getRangeLabel:function(t,e,a,n){return"第".concat(t,"/").concat(a,"页，共").concat(n,"条")},getPageParams:function(t,e){return{page:t,size:e}},getPagedResource:function(t){return{data:t.data,length:t.pager.recordCount}},changes:function(t,e){}},s={method:"GET",data:{},headers:{},timeout:-1,before:function(t){},success:function(t,e,a){},error:function(t){},finish:function(){},filter:function(t,e){return!0}},i='<svg viewBox="0 0 24 24" focusable="false" class="mat-icon"><path d="M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"></path></svg>',r='<svg viewBox="0 0 24 24" focusable="false" class="mat-icon"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></svg>',o='<svg viewBox="0 0 24 24" focusable="false" class="mat-icon"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg>',c='<svg viewBox="0 0 24 24" focusable="false" class="mat-icon"><path d="M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"></path></svg>',h=function(t,e){void 0===e&&(e={});var a=document.createElement(t);return Object.keys(e).forEach((function(t){a[t]=e[t]})),a},u=Symbol("initDomElements"),l=Symbol("updateActionStatus"),g=Symbol("updateRangeLabel"),p=function(){function t(t,e){var a=this;this.config={},this.previousPage=1,this.currentPage=1,this.length=0,this.size=0,this.container=t,this.config=Object.assign({},n,e),this.size=this.config.pageSizeOptions[0]||10,this.actions={selectPageSize:h("SELECT",{className:"mat-select mat-size-options",disabled:!0}),btnFirst:h("BUTTON",{type:"button",title:this.config.firstPageLabel,innerHTML:"".concat(i,'<span class="mat-btn-touch-target"></span>'),className:"mat-btn",disabled:!0}),btnPrev:h("BUTTON",{type:"button",title:this.config.previousPageLabel,innerHTML:"".concat(r,'<span class="mat-btn-touch-target"></span>'),className:"mat-btn",disabled:!0}),btnNext:h("BUTTON",{type:"button",title:this.config.nextPageLabel,innerHTML:"".concat(o,'<span class="mat-btn-touch-target"></span>'),className:"mat-btn",disabled:!0}),btnLast:h("BUTTON",{type:"button",title:this.config.lastPageLabel,innerHTML:"".concat(c,'<span class="mat-btn-touch-target"></span>'),className:"mat-btn",disabled:!0})},this.labels={itemsPerPageLabel:h("SPAN",{className:"mat-label mat-items-per-page"}),rangeLabel:h("SPAN",{className:"mat-label mat-range"})},this.panels={pageSizePanel:h("DIV",{className:"mat-page-size"}),actionsPanel:h("DIV",{className:"mat-range-actions"})},this.container.addEventListener("click",(function(t){var e=t.target;if(null!=e&&("mat-btn-touch-target"===e.className&&(e=e.parentElement),!e.disabled)){var n=a.actions,s=!0;switch(a.previousPage=a.currentPage,e){case n.btnFirst:a.currentPage=1;break;case n.btnPrev:a.currentPage=a.currentPage>1?a.currentPage-1:1;break;case n.btnNext:var i=a.currentPage+1,r=a.pages;a.currentPage=i>r?r:i;break;case n.btnLast:a.currentPage=a.pages;break;default:s=!1}s&&(a.config.changes(a.pageEvent,e),a.of(a.target,a.option))}})),this.actions.selectPageSize.addEventListener("change",(function(t){a.previousPage=a.currentPage,a.size=+t.target.value||10;var e=a.pages;a.currentPage>e&&(a.currentPage=e),a.config.changes(a.pageEvent,t.target),a.of(a.target,a.option)})),this[u]()}return Object.defineProperty(t.prototype,"pages",{get:function(){var t=this.length/this.size,e=Math.floor(t);return e===t?e:e+1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageParams",{get:function(){return this.config.getPageParams(this.currentPage,this.size)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageEvent",{get:function(){var t=this.currentPage*this.size;return{previousPage:this.previousPage,page:this.currentPage,size:this.size,start:(this.currentPage-1)*this.size,end:t>this.length?this.length:t,pages:this.pages,length:this.length}},enumerable:!1,configurable:!0}),t.init=function(e,a){return new t(e,a)},t.prototype.ajax=function(t,e){var a=this;if("string"!=typeof t)throw Error("Request url is required.");this.target=t,this.option=Object.assign({},s,e);var n={method:this.option.method,data:this.option.data,headers:this.option.headers,timeout:this.option.timeout,before:this.option.before};this.config.ajaxAdapter.request(this.target,this.pageParams,n).then((function(t){var e=a.config.getPagedResource(t),n=e.data,s=e.length;a.length=s;var i=a.pageEvent;a.option.success(n,i,a.option.data),a[l](i.page,i.pages,i.length),a[g]()})).catch(this.option.error).finally(this.option.finish)},t.prototype.resource=function(t,e){var a=this;if(!(t instanceof Array))throw Error("data must be an Array.");this.target=t,this.option=Object.assign({},s,e),this.option.before(null);var n=this.target.filter((function(t){return a.option.filter(t,a.option.data)}));this.length=n.length;var i=this.pageEvent,r=n.slice(i.start,i.end);this.option.success(r,i,this.option.data),this[l](i.page,i.pages,i.length),this[g](),this.option.finish()},t.prototype.of=function(t,e){if("string"!=typeof t){if(!(t instanceof Array))throw Error(t+" can not be paging.");this.resource(t,e)}else this.ajax(t,e)},t.prototype.refresh=function(){this.of(this.target,this.option)},t.prototype[u]=function(){var t=this;this.container.innerHTML='<div class="rabbit-pager"></div>',this.actions.selectPageSize.innerHTML=this.config.pageSizeOptions.map((function(t){return'<option value="'.concat(t,'">').concat(t,"</option>")})).join(""),this.labels.itemsPerPageLabel.innerHTML=this.config.itemsPerPageLabel+(this.config.showPageSizeOptions?"":this.config.pageSizeOptions[0]||10),[this.labels.itemsPerPageLabel,this.config.showPageSizeOptions?this.actions.selectPageSize:null].filter((function(t){return null!==t})).forEach((function(e){return t.panels.pageSizePanel.appendChild(e)})),[this.labels.rangeLabel,this.config.showFirstLastButtons?this.actions.btnFirst:null,this.actions.btnPrev,this.actions.btnNext,this.config.showFirstLastButtons?this.actions.btnLast:null].filter((function(t){return null!==t})).forEach((function(e){return t.panels.actionsPanel.appendChild(e)})),[this.config.hidePageSize?null:this.panels.pageSizePanel,this.panels.actionsPanel].filter((function(t){return null!==t})).forEach((function(e){return t.container.firstElementChild.appendChild(e)}))},t.prototype[g]=function(){this.labels.rangeLabel.innerHTML=this.config.getRangeLabel(this.currentPage,this.size,this.pages,this.length)},t.prototype[l]=function(t,e,a){var n=1===t,s=1===e||t===e,i="mat-btn".concat(n?"":" mat-ripple-btn"),r="mat-btn".concat(s?"":" mat-ripple-btn");this.actions.selectPageSize.disabled=0===a,this.actions.btnFirst.disabled=n,this.actions.btnFirst.className=i,this.actions.btnPrev.disabled=n,this.actions.btnPrev.className=i,this.actions.btnNext.disabled=s,this.actions.btnNext.className=r,this.actions.btnLast.disabled=s,this.actions.btnLast.className=r},t}(),f=function(){function t(){}return t.prototype.request=function(t,a,n){return new Promise((function(s,i){var r=(n.method||"GET").toUpperCase(),o=t,c={method:n.method,headers:n.headers};if("GET"===r){var h=Object.assign({},n.data,a);o=o+(t.includes("?")?"&":"?")+new URLSearchParams(h)}else if("POST"===r)if(n.data instanceof FormData){var u=new FormData;n.data.forEach((function(t,e){return u.set(e,t)})),Object.keys(a).forEach((function(t){return u.set(t,a[t])})),c.body=u}else{var l=n.headers["Content-Type"]||e.URL_ENCODED;if(l===e.FORM_DATA){var g=new FormData;Object.keys(n.data).forEach((function(t){return g.set(t,n.data[t])})),Object.keys(a).forEach((function(t){return g.set(t,a[t])})),c.body=g}else{h=Object.assign({},n.data,a);l===e.URL_ENCODED?c.body=new URLSearchParams(h):l===e.JSON&&(c.body=JSON.stringify(h))}}n.before(c),fetch(o,c).then((function(t){t.ok?t.json().then(s):i(t.status+": "+(t.statusText||"request failed."))})).catch(i)}))},t}(),d=p.init;t.ContentType=e,t.FetchAdapter=f,t.Paginator=p,t.XMLHttpRequestAdapter=a,t.createElement=h,t.init=d}));
//# sourceMappingURL=axpager.umd.min.js.map
